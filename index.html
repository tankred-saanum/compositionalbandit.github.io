<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alien diner</title>
    <link rel="stylesheet" href="style.css">


</head>
<body id = "body">
    <canvas id = "gameScreen" width="1400" height="500" style = "display:none"></canvas>
    <input type="range" min="0" max="10" value="5" class="xSlider" id="xSlider" style = "display:none">
    <input type="range" min="0" max="10" value="5" class="ySlider" id="ySlider" style = "display:none">

    <button type="button" id="submitButton" class = "submitButton" style = "display:none">Serve food</button>


    <div class ="informedConsent" id = "page1">
        <div class="mdl-card">
            <div class="mdl-card__media">
            <img src="tutorial_imgs/uclBannerRed.jpg" style="position: relative; width: 100%; right: 0;">
        </div>
        <div class="mdl-card__supporting-text" colour="red">
          <div class="consent_details">
            <ul>
              <li><strong>Title of Study:</strong> Alien Diner</li>
              <li><strong>Department:</strong> UCL Experimental Psychology</li>
              <li><strong>Name and contact details of the researcher: </strong>Tankred Saanum (tankred.saanum.19@ucl.ac.uk)</li>
              <li><strong>Name and contact details of the principal researcher: </strong> Maarten Speekenbrink (m.speekenbrink@ucl.ac.uk)</li>
              <li>This study has been approved by UCL Experimental Psychology Ethics Chair [Project ID: EP/2014/005]</li>
            </ul>
          </div>
          <div class="consent_information_sheet">
            <h3>Information about this study</h3>
            <p class ='consentpage'>
              You are invited to take part in a research project. Before you decide it is important for you to understand why the research is conducted
              and what participation will involve. Please take time to read the following information carefully and discuss it with others if you wish.
              Ask us if there is anything that is not clear or if you would like more information. Take time to decide whether or not you wish to take part.
              Thank you for reading this and considering taking part in this research.
            </p>

            <h4>What is the project’s purpose?</h4>
            <p class ='consentpage'>
              This experiment investigates learning and decision making.
            </p>

            <h4>Do I have to take part?</h4>
            <p class ='consentpage'>
              Your participation in this study is entirely voluntary. You can withdraw at any time without giving a reason.
              <strong>If you decide to withdraw, you will not receive any payment for your participation.</strong>
            </p>

            <h4> You are eligible for this study if:</h4>

            <ul>
              <li>You are at least 18 years old.</li>
              <li>You do not have any colour vision deficiency.</li>
            </ul>

            <h4>What will happen to me if I take part?</h4>
            <p class ='consentpage'>
                In this study, you will play a game where you serve food to aliens.
                You will repeatedly decide how to combine two ingredients in a dish you will serve to your alien customers.
                Your customers will give you money for the food you serve them.
                The amount of money they give will depend on how much they liked the food you served them. Different aliens
                may have different preferences and it is your task to learn what the aliens like in order to maximise your
                earnings.
                <!-- <b>Full instructions will be given in the tutorial at the start of the study.</b>
                After having provided your consent, having read the instructions and completed a tutorial, you will be able to participate in the experiment. -->
            </p>


            <h4>What are the possible benefits of taking part?</h4>
            <p class ='consentpage'>
              You will be paid X for completing the experiment and in the game and can win up to an additional X bonus reward, depending on your performance.
            </p>

            <h4>What if something goes wrong?</h4>
            <p class ='consentpage'>
              Should this research give you any reason for a complaint, please contact the principal researcher, Dr Maarten Speekenbrink (m.speekenbrink@ucl.ac.uk)
              in the first instance. Should you feel your complaint has not been handled to your satisfaction, you can contact the
              Chair of the UCL Research Ethics Committee (ethics@ucl.ac.uk).
            <p class ='consentpage'>

            <h4>Will my taking part in this project be kept confidential?</h4>
            <p class ='consentpage'>
              All the information that we collect about you during the course of the research will be kept strictly confidential.
              You will not be able to be identified in any ensuing reports or publications.
            </p>

            <h4>Limits to confidentiality</h4>
            <p class ='consentpage'>
              Confidentiality will be respected unless there are compelling and legitimate reasons for this to be breached.
              If this was the case we would inform you of any decisions that might limit your confidentiality.
            </p>

            <h4>What will happen to the results of the research project?</h4>
            <p class ='consentpage'>
              The results of the research will be presented in a Master's thesis by the researcher, and potentially published in an article or other formats.
              We expect the results of this research will be available by the end of 2020. If you'd like to receive a summary of the findings, you can contact
              the researcher, Tankred Saanum (tankred.saanum.19@ucl.ac.uk). We will give these details again at the end of the experiment.
            </p>
            <p class ='consentpage'>
              Anonymous data collected during the study may be made publically available on platforms such as the Open Science Framework (osf.io)
              and GitHub (github.com). This data will not include information which would allow others to identify you.
            </p>

            <h4>Data Protection Privacy Notice</h4>
            <p class ='consentpage'>
              The data controller for this project will be University College London (UCL). The UCL Data Protection Office provides oversight of UCL activities
              involving the processing of personal data and can be contacted at data-protection@ucl.ac.uk. UCL’s Data Protection Officer can also be contacted at
              data-protection@ucl.ac.uk.
            </p>
            <p class ='consentpage'>
              Your personal data will be processed for the purposes outlined in this notice.
            </p>
            <p class ='consentpage'>
              The legal basis that would be used to process your personal data will be performance of a task in the public interest. The legal basis used to
              process special category personal data will be for scientific and historical research or statistical purposes.
            </p>
            <p class ='consentpage'>
              Your personal data will be processed so long as it is required for the research project. If we are able to anonymise or pseudonymise the personal data
              you provide we will undertake this and will endeavour to minimise the processing of personal data wherever possible.
            </p>
            <p class ='consentpage'>If you are concerned about how your personal data is being processed, please contact UCL in the first instance at data-protection@ucl.ac.uk.
              If you remain unsatisfied, you may wish to contact the Information Commissioner’s Office (ICO). Contact details and details of data subject rights
              are available on the ICO website at: https://ico.org.uk/for-organisations/data-protection-reform/overview-of-the-gdpr/individuals-rights/
            </p>
          </div>
          <div class="consent_informed_consent">
            <p class ='consentpage'>
              If you have any questions concerning the research, please contact the researchers before proceeding.
              We advise you to make a copy of this information and the consent form below to keep and refer to at any time.
            </p>
            <p class ='consentpage'>
              <strong><u>By ticking the box below, you consent to all of the following:
                                <!-- I understand that by not giving consent for any one element that I am ineligible to participate in the study. -->
              </u></strong>
            </font>
            </p>
          </div>
        </div>
        <div class="mdl-card__actions" style="width: 95%">
          <div class="consent-informed-consent-statements">
            <p class ='consentpage'>
              <li>
              I confirm that I have read and understood the information for this study given to me above.
              I have had an opportunity to consider the information and what will be expected of me.
              I have also had the opportunity to ask questions which have been answered to my satisfaction.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that I will be able to withdraw my data up to 7 days after completing the experiment.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
                I consent to the processing of my personal information for the purposes explained to me.
                I understand that such information will be handled in accordance with all applicable data protection
                legislation.
            </li>
            </p>
            <p class ='consentpage'>
              <li>
                I understand that my data gathered in this study will be stored anonymously and securely.
                It will not be possible to identify me in any publications.
            </li>
            </p>
            <p class ='consentpage'>
              <li>
                I understand that my information may be subject to review by responsible individuals from the University
                for monitoring and audit purposes.
            </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that my participation is voluntary and that I am free to withdraw at any time without
              giving a reason. I understand that if I decide to withdraw, I will not receive any payment for my participation and
              any personal data I have provided up to that point will be deleted unless I agree otherwise.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that I will be paid X for my participation and can earn up to X additionally, depending
              on my performance in the game.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that the data will not be made available to any commercial organisations but is solely
              the responsibility of the researcher(s) undertaking this study.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I agree that my anonymised research data may be used by others for future research.
              No one will be able to identify me when this data is shared.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that the information I have submitted may be published as a report.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I hereby confirm that I understand the exclusion criteria as detailed above and
              I do not fall under the exclusion criteria.
          </li>
            </p>
            <p class ='consentpage'>
               <li>
               I am aware of who I should contact if I wish to lodge a complaint.
           </li>
            </p>
            <p class ='consentpage'>
              <li>
              I voluntarily agree to take part in this study.
          </li>
            </p>
            <br>
            <label><input type="checkbox" id="consent_check1" />
            <b>I confirm that I consent to all of the points above and my voluntary participation in this study.
              <!-- have read and understood the information about the study. I have had an opportunity
             to consider the information and what will be expected of me. I have also had the opportunity to ask
              questions which have been answered to my satisfaction. -->
            </b>
          </label>
          <!-- <br><br>
          <label><input type="checkbox" id="consent_check2" />
          <b>I voluntarily agree to take part in this study.</b>
            </label>
          -->
            <br><br>
            <button id="consentButton" class="consentButton">Continue</button>
            <br><br>
          </div>
        </div>
      </div>
    </div>

    <div class = "demographicsDiv" id = "page2" style="display:none">
        <h1>Please select you gender:</h1>
            <input type="radio" id="male"class="genderButton" name="gender" value="male">
            <label for="male">Male</label><br />
            <input type="radio" id="female"class="genderButton" name="gender" value="female">
            <label for="female">Female</label><br />
            <input type="radio" id="other" class="genderButton" name="gender" value="other">
            <label for="other">Other</label><br />
            <input type="radio" id="prefernot" class="genderButton" name="gender" value="prefernot">
            <label for="prefernot">Prefer not to say</label>


        <h1>What is your age?</h1>
            <label for="fname">Age: </label>
            <input type="text" id="ageField" name="age"><br><br>
        <button id="demographicsButton" class="demographicsButton">Continue</button>
        <br><br>
    </div>

    <div class="instructionsWrapper" id = "instructionsWrapper">

        <div id = "page3" style="display:none">
            <br>
    		     <p><b>Overview:</b></p>
    			 <ul style="line-height:1.8">
    			    <li>In this study, you will play a game where you serve food to aliens. </li>
                    <li>You will repeatedly create dishes to serve the aliens by combining amounts of two types of ingredients. </li>
                    <li>Your customers will give you money for the food you serve them. The amount of money they give will depend on how much they liked the food. </li>
                    <li>Different aliens have different coloured symbols on their bellies. The aliens use these features to signal their food preferences.</li>
    			          <li>Your goal is to earn as much money as possible. You therefore want to serve your customers the dishes they like most. You should therefore try to learn which combinations of ingredients the aliens prefer.</li>
    			 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div>

        <div id = "page4" style="display:none">
            <br>
                 <p><b>Learning about preferences:</b></p>
                 <ul style="line-height:1.8">

                    <li>The aliens have quite particular preferences for the ingredients and will pay you according to how much they
                    like the food you served them.</li>
                    <li> Since your customers are from a different planet, their food preferences may seem a bit peculiar.
                    <!-- <li> For instance, some aliens may really like a particular ingredient, and would want a lot of that ingredient,
                    <br> while other aliens may dislike an ingredient, and want less. </li> -->
                     For instance, some aliens may only like very specific amounts of a particular ingredient, and other aliens may be completely indifferent towards certain ingredients. </li>
                    <li> <b>Crucially</b>, the aliens’ preferences are related to the coloured symbols on their bellies. <!-- ir appearance: Identical aliens have identical
                        <br> preferences and similar aliens have similar preferences. </li>
                    <li> -->These features of the aliens will therefore provide a clue about what combination of ingredients they like. </li>
                 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div>

        <div id = "page5" style="display:none">
            <br>
                 <p><b>Overview:</b></p>
                 <ul style="line-height:1.8">
                     <li>In each round you have two types of ingredients you can use in your dishes. Your task is to decide how much of each ingredient you want to use when preparing a dish.</li>
                     <li>Each ingredient you can choose from is shown on the screen with a slider. For both ingredients, you can choose to use between <b> 0 and 10 </b> units of that ingredient by changing the value of the slider. </li>
                     <figure>
                         <img src="tutorial_imgs/sliderDemo.png" alt="Missing"style="width:45%;height:25%;">
                         <figcaption>Use sliders to select ingredients.</figcaption>
                     </figure>
                     <!--<li>Each ingredient you can choose from is shown on the screen with a slider.</li>
                     <li>You can change how much of an ingredient you want to use by changing the value of the slider. </li> -->
                     <li>To serve the dish, you press the "Serve food" button. You will then serve the dish with the chosen amount of ingredients you selected with the sliders. </li>
                     <figure>
                         <img src="tutorial_imgs/serveDemo.png" alt="Missing"style="width:20%;height:30%;">
                         <figcaption>Serve the food by clicking the button.</figcaption>
                     </figure>
                     <!-- <li> How much your customers like your food depends on the <b>amounts </b>of each ingredient you use. </li> -->
                     <li>After you serve the dish, you will see the amount of money the alien pays for the food. Remember that how much an alien pays depends on how much they like the food, which in turn depends on on the <b>amounts </b>of each ingredient you use.</li>
                     <li> At the end of each round there is a bonus round. In the bonus round, you will be able to create dishes with a larger amount (between<b> 0 and 15 </b> units) of each ingredient.</li>
                     
                     <figure>
                         <img src="tutorial_imgs/bonusDemo.png" alt="Missing"style="width:20%;height:30%;">
                         <figcaption>The sliders go from 0 to 15 in the bonus rounds.</figcaption>
                     </figure>
                     <!-- <li> The customers will gather at the tables. To serve them, you need to walk to their table. </li> -->
                     <!-- <li> If a customer finds themselves waiting for food at one of your tables for too long, they will complain. </li> -->
                     <!-- <li> If you continue to ignore a customer after they complain, they will be angry and give you less money. </li> -->

                 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
            <!-- <br> <br>
            <div id="imgDiv">
                <figure>
                    <img src="tutorial_imgs/sliderDemo.png" alt="Missing"style="width:45%;height:25%;">
                    <figcaption>Use sliders to select ingredients.</figcaption>
                </figure>
                <br>
                <figure>
                    <img src="tutorial_imgs/serveDemo.png" alt="Missing"style="width:20%;height:30%;">
                    <figcaption>Serve the food by clicking the button.</figcaption>
                </figure>
                <br>
                <!-- <figure>
                <img src="tutorial_imgs/tableDemo.png" alt="Missing"style="width:20%;height:30%;">
                    <figcaption>You will serve the alien at the table you have walked to.</figcaption>
                </figure>

            </div>
            <br> <br>
          -->
        </div>


        <div id = "page6" style="display:none">
            <br>
                 <p><b>Learning about preferences:</b></p>
                 <ul style="line-height:1.8">

                    <li>The game has 4 rounds. In each round you will serve a varying amount of alien customers. </li>
                    <li> The currency the customers pay with will change from round to round and you can see how many aliens you still need to serve in the current round.</li>
                    <li> You need to serve all aliens to progress to the next round, and you need to complete all rounds to finish the experiment. </li>
                    <li> You will continuously get feedback about how much you have earned in each round.
                    <!-- <li> You will also be able to </li>
                    <!-- <li> If a customer finds themselves waiting for food at one of your tables for too long, they will complain </li>
                    <li> If you continue to ignore a customer after they complain, they will be angry and give you less money </li> -->
                    <!--  -->
                    You will be told at the end of each round how much you earned. </li>
                 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div>


        <div id="wrongDevicePage" style="display:none">
            <p><b> You cannot complete this experiment on your phone or your tablet. Please use a laptop or personal computer.</b></p>
        </div>

    </div>

    <div id="page7" style="display:none" class="tutorialElement">


        <div  class = "tutorialWrapper">
            <h2><b>TUTORIAL</b></h2>

            <div id = "tutorialDiv">
                <p>This is the tutorial: To proceed to the experiment, complete the instructions given in this tutorial.</p>
            </div>

            <button type="button" id="tutorialButton" class = "tutorialButton">Start Tutorial</button>



            <div id = "moveDiv" style="display:none">
                <p>You need to serve all the aliens. Use the "A" or left arrow key to move to the left.
                    <br>Use the "D" or left arrow key to move to the right.</p>
                <p> Try moving around! </p>
            </div>

            <div id = "sliderDiv" style="display:none">
                <p>You can select food items by adjusting the sliders from left to right.</p>
                <p>Try changing the the amount of food for one of the sliders</p>
            </div>

            <div id = "serveDiv" style="display:none">
                <p>Now you can serve the food to one of the aliens.</p>
                <p>You serve the food by clicking the "SERVE FOOD" button.</p>
                <p>You will then serve whatever food you had selected with the sliders.</p>
            </div>

            <div id = "serveAllDiv" style="display:none">
                <p>Now try to serve the rest of the aliens.</p>
            </div>

            <div id = "continueDiv" style = "display:none">
                <p>Well done! Click continue to proceed.</p>
                <button type="button" id="nextStage" class = "tutorialButton">Continue</button>
            </div>

        </div>
    </div>

    <div id = "page8" style = "display:none" class="tutorialElement">
        <div class = "tutorialWrapper">
            <p>You have finished the tutorial, well done!</p>
            <p> To continue to the experiment, you need to go into fullscreen. Please press the fullscreen button.</p>
            <button type="button" id="fullscreenBtn" class = "instructionsButton">Fullscreen</button>
            <!-- <button type="button" id="contButton" class = "instructionsButton" >Continue to experiment</button> -->
        </div>
    </div>

    <!-- This page contains all the experiment stuff -->
    <div id="page9" style = "display:none" class="gamePage">
        <!-- <canvas id = "gameScreen" width="1400" height="500" ></canvas> -->

        <!-- <input type="range" min="0" max="10" value="5" class="xSlider" id="xSlider">
        <input type="range" min="0" max="10" value="5" class="ySlider" id="ySlider">

        <button type="button" id="submitButton" class = "submitButton">Serve food</button> -->
        <div class="wrapper">
            <!-- <button type="button" id="fullscreenBtn" class = "fullscreenBtn">Fullscreen</button> -->
            <button type="button" id="start" class = "startGameBtn">Start game</button>

        </div>
    </div>
    <div id="page10" style="display:none" class="endPage"

            <p>You have finished the experiment. Thank you for your participation. This experiment forms part of a study on compositional
            reward function learning.</p>
    </div>

    <!-- scripts: -->

    <!-- Add main.js file -->
    <script type="module" src="main.js"></script>

    <!-- Add firebase libraries and authentication: -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-database.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyC553XV2UKSmSnQX-549YjLe81hG_GV4zk",
        authDomain: "compositional-rl.firebaseapp.com",
        databaseURL: "https://compositional-rl.firebaseio.com",
        projectId: "compositional-rl",
        storageBucket: "compositional-rl.appspot.com",
        messagingSenderId: "127031641582",
        appId: "1:127031641582:web:9680050835cf89bec93aff",
        measurementId: "G-KF126387R1"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>

</body>
</html>
