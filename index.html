<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">


</head>
<body id = "body">
    <canvas id = "gameScreen" width="1400" height="500" style = "display:none"></canvas>
    <input type="range" min="0" max="10" value="5" class="xSlider" id="xSlider" style = "display:none">
    <input type="range" min="0" max="10" value="5" class="ySlider" id="ySlider" style = "display:none">

    <button type="button" id="submitButton" class = "submitButton" style = "display:none">Serve food</button>

    <!--  -->
    <!-- remove after debugging -->
    <!-- <button type="button" id="fullscreenBtn" class = "instructionsButton">Fullscreen</button>
    <button type="button" id="start" class = "startGameBtn">Start game</button> -->
    <!--  -->

    <div class ="informedConsent" id = "page1">
        <div class="mdl-card" style="width: 100%; text-align: center">
            <div class="mdl-card__media">
            <img src="tutorial_imgs/uclBannerRed.jpg" style="position: relative; width: 100%; right: 0;">
        </div>
        <div class="mdl-card__supporting-text" colour="red">
          <div class="consent_details">
            <ul>
              <li><strong>Title of Study:</strong> Compositional function learning</li>
              <li><strong>Department:</strong> UCL Experimental Psychology</li>
              <li><strong>Name and contact details of the researcher:</strong>Tankred Saanum (tankred.saanum.19@ucl.ac.uk)</li>
              <li><strong>Name and contact details of the principal researcher:</strong> Maarten Speekenbrink (m.speekenbrink@ucl.ac.uk)</li>
              <li>This study has been approved by UCL Experimental Psychology Ethics Chair [Project ID: EP/2014/005]</li>
            </ul>
          </div>
          <div class="consent_information_sheet">
            <h3>Information about this study</h3>
            <p class ='consentpage'>
              You are invited to take part in a research project. Before you decide it is important for you to understand why the research is conducted
              and what participation will involve. Please take time to read the following information carefully and discuss it with others if you wish.
              Ask us if there is anything that is not clear or if you would like more information. Take time to decide whether or not you wish to take part.
              Thank you for reading this and considering taking part in this research.
            </p>

            <h4>What is the project’s purpose?</h4>
            <p class ='consentpage'>
              This experiment investigates decision-making and learning.
            </p>

            <h4>Do I have to take part?</h4>
            <p class ='consentpage'>
              Your participation in this study is entirely voluntary. You can withdraw at any time without giving a reason.
              <font color="#E5581"> If you decide to withdraw, you will not receive any payment for your participation.</font>
            </p>

            <h4> You are eligible for this study if:</h4>

            <li>You are at least 18 years old.</li>
            <li>You do not have any colour vision deficiency.</li>

            <h4>What will happen to me if I take part?</h4>
            <p class ='consentpage'>
                In this study, you will play a game where you serve food to aliens.
                You will repeatedly choose between different combinations of two types of ingredients which you will serve to your alien customers.
                Your customers will give you money for the food you serve them.
                The amount of money they give will depend on how much they liked the food you served them.
                <b>Full instructions will be given in the tutorial at the start of the study.</b>
                After having provided your consent, having read the instructions and completed a tutorial, you will be able to participate in the experiment.
            </p>


            <h4>What are the possible benefits of taking part?</h4>
            <p class ='consentpage'>
              You will be paid X for completing the experiment and in the game and can win up to an additional X bonus reward, depending on your performance.
            </p>

            <h4>What if something goes wrong?</h4>
            <p class ='consentpage'>
              Should this research give you any reason for a complaint, please contact the principal researcher, Dr Maarten Speekenbrink (m.speekenbrink@ucl.ac.uk)
              in the first instance. Should you feel your complaint has not been handled to your satisfaction, you can contact the
              Chair of the UCL Research Ethics Committee (ethics@ucl.ac.uk).
            <p class ='consentpage'>

            <h4>Will my taking part in this project be kept confidential?</h4>
            <p class ='consentpage'>
              All the information that we collect about you during the course of the research will be kept strictly confidential.
              You will not be able to be identified in any ensuing reports or publications.
            </p>

            <h4>Limits to confidentiality</h4>
            <p class ='consentpage'>
              Confidentiality will be respected unless there are compelling and legitimate reasons for this to be breached.
              If this was the case we would inform you of any decisions that might limit your confidentiality.
            </p>

            <h4>What will happen to the results of the research project?</h4>
            <p class ='consentpage'>
              The results of the research will be presented in a Master's thesis by the researcher, and potentially published in an article or other formats.
              We expect the results of this research will be available by the end of 2020. If you'd like to receive a summary of the findings, you can contact
              the researcher, Tankred Saanum (tankred.saanum.19@ucl.ac.uk). We will give these details again at the end of the experiment.
            </p>
            <p class ='consentpage'>
              Anonymous data collected during the study may be made publically available on platforms such as the Open Science Framework (osf.io)
              and GitHub (github.com). This data will not include information which would allow others to identify you.
            </p>

            <h4>Data Protection Privacy Notice</h4>
            <p class ='consentpage'>
              The data controller for this project will be University College London (UCL). The UCL Data Protection Office provides oversight of UCL activities
              involving the processing of personal data and can be contacted at data-protection@ucl.ac.uk. UCL’s Data Protection Officer can also be contacted at
              data-protection@ucl.ac.uk.
            </p>
            <p class ='consentpage'>
              Your personal data will be processed for the purposes outlined in this notice.
            </p>
            <p class ='consentpage'>
              The legal basis that would be used to process your personal data will be performance of a task in the public interest. The legal basis used to
              process special category personal data will be for scientific and historical research or statistical purposes.
            </p>
            <p class ='consentpage'>
              Your personal data will be processed so long as it is required for the research project. If we are able to anonymise or pseudonymise the personal data
              you provide we will undertake this and will endeavour to minimise the processing of personal data wherever possible.
            </p>
            <p class ='consentpage'>If you are concerned about how your personal data is being processed, please contact UCL in the first instance at data-protection@ucl.ac.uk.
              If you remain unsatisfied, you may wish to contact the Information Commissioner’s Office (ICO). Contact details and details of data subject rights
              are available on the ICO website at: https://ico.org.uk/for-organisations/data-protection-reform/overview-of-the-gdpr/individuals-rights/
            </p>
          </div>
          <div class="consent_informed_consent">
            <p class ='consentpage'>
            <font color="#E5581">
              If you have any questions concerning the research, please contact the researchers before proceeding.
              We advise you to make a copy of this information and the consent form below to keep and refer to at any time.
            </p>
            <p class ='consentpage'>
              <strong><u>I confirm that I understand that by ticking the boxes below I am consenting to taking part in the study as detailled below.
                I understand that by not giving consent for any one element that I am ineligible to participate in the study.
              </u></strong>
            </font>
            </p>
          </div>
        </div>
        <div class="mdl-card__actions" style="width: 95%">
          <div class="consent-informed-consent-statements">
            <p class ='consentpage'>
              <li>
              I confirm that I have read and understood the information for this study given to me above.
              I have had an opportunity to consider the information and what will be expected of me.
              I have also had the opportunity to ask questions which have been answered to my satisfaction.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that I will be able to withdraw my data up to 7 days after completing the experiment.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
                I consent to the processing of my personal information for the purposes explained to me.
                I understand that such information will be handled in accordance with all applicable data protection
                legislation.
            </li>
            </p>
            <p class ='consentpage'>
              <li>
                I understand that my data gathered in this study will be stored anonymously and securely.
                It will not be possible to identify me in any publications.
            </li>
            </p>
            <p class ='consentpage'>
              <li>
                I understand that my information may be subject to review by responsible individuals from the University
                for monitoring and audit purposes.
            </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that my participation is voluntary and that I am free to withdraw at any time without
              giving a reason. I understand that if I decide to withdraw, I will not receive any payment for my participation and
              any personal data I have provided up to that point will be deleted unless I agree otherwise.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that I will be paid X for my participation and can earn up to X additionally, depending
              on my performance in the game.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that the data will not be made available to any commercial organisations but is solely
              the responsibility of the researcher(s) undertaking this study.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I agree that my anonymised research data may be used by others for future research.
              No one will be able to identify me when this data is shared.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I understand that the information I have submitted may be published as a report.
          </li>
            </p>
            <p class ='consentpage'>
              <li>
              I hereby confirm that I understand the exclusion criteria as detailed above and
              I do not fall under the exclusion criteria.
          </li>
            </p>
            <p class ='consentpage'>
               <li>
               I am aware of who I should contact if I wish to lodge a complaint.
           </li>
            </p>
            <p class ='consentpage'>
              <li>
              I voluntarily agree to take part in this study.
          </li>
            </p>
            <br>
            <label><input type="checkbox" id="consent_check1" />
            <b>I confirm that I have read and understood the information about the study. I have had an opportunity
             to consider the information and what will be expected of me. I have also had the opportunity to ask
              questions which have been answered to my satisfaction.</b>
          </label>
          <br><br>
          <label><input type="checkbox" id="consent_check2" />
          <b>I voluntarily agree to take part in this study.</b>
            </label>
            <br><br>
            <button id="consentButton" class="consentButton">Continue</button>
            <br><br>
          </div>
        </div>
      </div>
    </div>

    <div class = "demographicsDiv" id = "page2" style="display:none">
        <h1>Please select you gender:</h1>
            <input type="radio" id="male"class="genderButton" name="gender" value="male">
            <label for="male">Male</label><br>
            <input type="radio" id="female"class="genderButton" name="gender" value="female">
            <label for="female">Female</label><br>
            <input type="radio" id="other" class="genderButton" name="gender" value="other">
            <label for="other">Other</label>


        <h1>What is your age?</h1>
            <label for="fname">Age: </label>
            <input type="text" id="ageField" name="age"><br><br>
        <button id="demographicsButton" class="demographicsButton">Continue</button>
        <br><br>
    </div>

    <div class="instructionsWrapper" id = "instructionsWrapper">
        <!--First page contains Welcome-->
        <!-- <div id="page1" style="display:block">
          <h3>Decision making experiment</h3>
          <p> This study is part of a research project conducted by Tankred Saanum and Maarten Speekenbrink </p>
          <p> If you have any questions, please contact: <strong>tankred.saanum.19@ucl.ac.uk</strong></p>
          <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div> -->

        <!--First page contains Welcome-->
        <div id="pagen" style="display:none">
 	   		<br>
 		   	<h4><center>Statement of Informed Consent</center></h4>
 		   	<p><center>Please consider this information carefully before deciding whether to participate in this research.</center></p>
 		    <p><b>Purpose of the research:</b> To examine the way people make decisions and learn about the relationships between stimuli, actions and rewards. </p>
 		    <p><b>What you will do in this research:</b> Stimuli (images) will be presented on the computer and you will be asked to choose between different actions after which you may receive feedback to earn monetary reward. You may also be asked to fill out short questionnaires. </p>
 		    <p><b>Time required: </b> Participation will take up to 30 minutes to complete.</p>
 		    <p><b>Risks:</b>  Some of the questionnaires contain questions about sensitive topics such as sexual, physical, or emotional abuse, drug use, violent behavior, medical/psychiatric history, etc., and could cause you to feel uncomfortable or upset. If you do not feel comfortable, you can skip questions or stop the questionnaires at any time.</p>
 		    <p><b>Compensation:</b> You will receive $2 in compensation plus up to $1.50 in bonus for your performance on the task.</p>
 		    <p><b>Confidentiality:</b>  Your participation in this study will remain confidential. Your MTurk worker IDs will NOT be shared with anyone outside of the research team. However, work you perform on MTurk can be linked to your pub-lic profile page. Thus, to maximize your privacy, you may wish to restrict what information you choose to share in your public profile. Your de-identified data may be shared with other researchers and used in future projects.</p>
 			<p>In some cases, we may be interested in re-contacting you for additional information or to participate in a follow-up experiment. If we do, your participation is completely optional and you would be compensated appropriately for your time. If you <b>DO NOT</b> wish to be recontacted, please check the box.
 			</p>
 			<fieldset>
 				<fieldset style="float:left;width:400px;margin:5px">
 			        <input type="radio" name="q1"; onclick="setrecontact(true)" > I am willing to be recontacted in the future. (Default)<br>
 			        <input type="radio" name="q1"; onclick="setrecontact(false)"> I do not wish to be recontacted.<br>
 				</fieldset>
 			</fieldset>
 			<p><b>Participation and withdrawal: </b>Your participation in this study is completely voluntary and you may refuse to participate or you may choose to withdraw at any time without penalty or loss of benefits to which you are otherwise entitled.</p>
 			<p><b>How to contact the researchers: </b>If you have questions or concerns about your participation or payment, or want to request a summary of research findings, please contact Sam Gershman, gershman@fas.harvard.edu, (773) 607-9817.</p>
 			<p><b>Whom to contact about your rights as a participant in this research:</b> For questions, concerns, suggestions, or complaints that have not been or cannot be addressed by the researcher, or to report research-related harm, please contact the Committee on the Use of Human Subjects, Richard A. and Susan F. Smith Campus Center, 1350 Mas-sachusetts Avenue, Suite 935, Cambridge, MA 02138; Email: cuhs@harvard.edu</p>
 			<p>Please print or save a copy of this form for your records.</p>
 			<p><b>Agreement:  </b></p>
 			<div style="margin-left:30px;margin-right:30px"> <p>The nature and purpose of this research have been sufficiently explained and I agree to participate in this study.  I understand that I am free to withdraw at any time without incurring any penalty.</p>
 			<p>Please consent by clicking the button below to continue. Otherwise, please exit the study at this time. </p>
 			<button type="button" id="acceptButton" class = "instructionsButton" >Agree</button>
 			</div>
 			<br><br>
 	    </div>

        <div id = "page3" style="display:none">
            <br>
    		     <p><b>Overview:</b></p>
    			 <ul style="line-height:1.8">
    			    <li>In this study, you will play a game where you serve food to aliens. </li>
                    <li>You will repeatedly choose between different combinations of two types of ingredients which you will serve to your alien customers. </li>
                    <li>Your customers will give you money for the food you serve them. </li>
                    <li>The amount of money they give will depend on how much they liked the food you served them. </li>
                    <li>Furthermore, aliens that look the same like the same food. </li>
    			    <li>Your goal is to earn as much money as possible. You therefore want to serve your customers food they like. </li>
                    <li>You should therefore try to learn which combinations of ingredients the aliens like.</li>


    			 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div>

        <div id = "page4" style="display:none">
            <br>
                 <p><b>Learning about preferences:</b></p>
                 <ul style="line-height:1.8">

                    <li>The aliens have quite particular preferences for the ingredients and will pay you according to how much they
                    <br> like the food you served them.</li>
                    <li> Since your customers are from a different planet, their food preferences may seem a bit peculiar: </li>
                    <!-- <li> For instance, some aliens may really like a particular ingredient, and would want a lot of that ingredient,
                    <br> while other aliens may dislike an ingredient, and want less. </li> -->
                    <li> For instance, some aliens may only like very specific amounts of a particular ingredient, and other aliens may be
                        <br>completely indifferent towards certain ingredients. </li>
                    <li> <b>Crucially</b>, the aliens’ preferences are related to their appearance: Identical aliens have identical
                        <br> preferences and similar aliens have similar preferences. </li>
                    <li> The features of the aliens will therefore provide a clue about what combination of ingredients they like. </li>
                 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div>

        <div id = "page5" style="display:none">
            <br>
                 <p><b>Overview:</b></p>
                 <ul style="line-height:1.8">
                     <li>In each round you have two types of ingredients you can use to make food. Your task is to decide how much of each ingredient
                                     <br> you want to use when preparing the food.</li>
                     <li> For both ingredients, you can choose to use between <b> 0 and 10 </b> units of that ingredient. </li>
                     <li> How much your customers like your food depends on the <b>amounts </b>of each ingredient you use. </li>
                     <li>Each ingredient you can choose from is shown on the screen with a slider.</li>
                     <li>You can change how much of an ingredient you want to use by changing the value of the slider. </li>
                     <li>To serve the food, you press the "Serve food" button. You will then give whatever amount of ingredients you had selected with the sliders. </li>
                     <li>When you have made a choice, the amount of money you receive will appear on the screen.</li>
                     <li> At the end of each round there is a bonus round. Here you will be able to choose between<b> 0 and 15 </b> units of the ingredient at hand. </li>
                     <!-- <li> The customers will gather at the tables. To serve them, you need to walk to their table. </li> -->
                     <!-- <li> If a customer finds themselves waiting for food at one of your tables for too long, they will complain. </li> -->
                     <!-- <li> If you continue to ignore a customer after they complain, they will be angry and give you less money. </li> -->

                 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
            <br> <br>
            <div id="imgDiv">
                <figure>
                    <img src="tutorial_imgs/sliderDemo.png" alt="Missing"style="width:45%;height:25%;">
                    <figcaption>Use sliders to select ingredients.</figcaption>
                </figure>
                <br>
                <figure>
                    <img src="tutorial_imgs/serveDemo.png" alt="Missing"style="width:20%;height:30%;">
                    <figcaption>Serve the food by clicking the button.</figcaption>
                </figure>
                <br>
                <!-- <figure>
                <img src="tutorial_imgs/tableDemo.png" alt="Missing"style="width:20%;height:30%;">
                    <figcaption>You will serve the alien at the table you have walked to.</figcaption>
                </figure> -->

            </div>
            <br> <br>
        </div>


        <div id = "page6" style="display:none">
            <br>
                 <p><b>Learning about preferences:</b></p>
                 <ul style="line-height:1.8">

                    <li>The game has 5 rounds. In each round you will serve a varying amount of alien customers. </li>
                    <li> The currency the customers pay with will change from round to round. </li>
                    <li> You will continuously get feedback about how much you have earned in each round. </li>
                    <li> You will also be able to see how many aliens that you still need to serve for the current round. </li>
                    <!-- <li> If a customer finds themselves waiting for food at one of your tables for too long, they will complain </li>
                    <li> If you continue to ignore a customer after they complain, they will be angry and give you less money </li> -->
                    <li> You need to serve all aliens to progress to the next round, and you need to complete all rounds to finish the experiment. </li>
                    <li> You will be told at the end of each round how much you earned. </li>
                 </ul>
            <br>
            <button type="button" id="contButton" class = "instructionsButton" >Continue</button>
        </div>


        <div id="wrongDevicePage" style="display:none">
            <p><b> You cannot complete this experiment on your phone or your tablet. Please use a laptop or personal computer.</b></p>
        </div>

    </div>

    <div id="page7" style="display:none" class="tutorialElement">


        <div  class = "tutorialWrapper">
            <h2><b>TUTORIAL</b></h2>

            <div id = "tutorialDiv">
                <p>This is the tutorial: To proceed to the experiment, complete the instructions given in this tutorial.</p>
            </div>

            <button type="button" id="tutorialButton" class = "tutorialButton">Start Tutorial</button>



            <div id = "moveDiv" style="display:none">
                <p>You need to serve all the aliens. Use the "A" or left arrow key to move to the left.
                    <br>Use the "D" or left arrow key to move to the right.</p>
                <p> Try moving around! </p>
            </div>

            <div id = "sliderDiv" style="display:none">
                <p>You can select food items by adjusting the sliders from left to right.</p>
                <p>Try changing the the amount of food for one of the sliders</p>
            </div>

            <div id = "serveDiv" style="display:none">
                <p>Now you can serve the food to one of the aliens.</p>
                <p>You serve the food by clicking the "SERVE FOOD" button.</p>
                <p>You will then serve whatever food you had selected with the sliders.</p>
            </div>

            <div id = "serveAllDiv" style="display:none">
                <p>Now try to serve the rest of the aliens.</p>
            </div>

            <div id = "continueDiv" style = "display:none">
                <p>Well done! Click continue to proceed.</p>
                <button type="button" id="nextStage" class = "tutorialButton">Continue</button>
            </div>

        </div>
    </div>

    <div id = "page8" style = "display:none" class="tutorialElement">
        <div class = "tutorialWrapper">
            <p>You have finished the tutorial, well done!</p>
            <p> To continue to the experiment, you need to go into fullscreen. Please press the fullscreen button.</p>
            <button type="button" id="fullscreenBtn" class = "instructionsButton">Fullscreen</button>
            <!-- <button type="button" id="contButton" class = "instructionsButton" >Continue to experiment</button> -->
        </div>
    </div>

    <!-- This page contains all the experiment stuff -->
    <div id="page9" style = "display:none" class="gamePage">
        <!-- <canvas id = "gameScreen" width="1400" height="500" ></canvas> -->

        <!-- <input type="range" min="0" max="10" value="5" class="xSlider" id="xSlider">
        <input type="range" min="0" max="10" value="5" class="ySlider" id="ySlider">

        <button type="button" id="submitButton" class = "submitButton">Serve food</button> -->
        <div class="wrapper">
            <!-- <button type="button" id="fullscreenBtn" class = "fullscreenBtn">Fullscreen</button> -->
            <button type="button" id="start" class = "startGameBtn">Start game</button>

        </div>
    </div>
    <div id="page10" style="display:none" class="endPage"

    <p>You have finished the experiment. Please click the link to be directed back to prolific.</p>
    </div>

    <!-- scripts: -->

    <!-- Add main.js file -->
    <script type="module" src="main.js"></script>

    <!-- Add firebase libraries and authentication: -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-database.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyC553XV2UKSmSnQX-549YjLe81hG_GV4zk",
        authDomain: "compositional-rl.firebaseapp.com",
        databaseURL: "https://compositional-rl.firebaseio.com",
        projectId: "compositional-rl",
        storageBucket: "compositional-rl.appspot.com",
        messagingSenderId: "127031641582",
        appId: "1:127031641582:web:9680050835cf89bec93aff",
        measurementId: "G-KF126387R1"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>

</body>
</html>
